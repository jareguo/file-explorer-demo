var events = require('events');
var path = require('path');
var util = require('util');
var mime = require('mime');
if (process.platform == 'win32') {
    var win32 = require("win32");
}

function Tree(jquery_element) {
    events.EventEmitter.call(this);
    this.element = jquery_element;

    var self = this;
    jquery_element.jstree();
    //// Click on blank
    //this.element.parent().on('click', function () {
    //    self.element.children('.focus').removeClass('focus');
    //});
    //// Click on file
    //this.element.delegate('.file', 'click', function (e) {
    //    self.element.children('.focus').removeClass('focus');
    //    $(this).addClass('focus');
    //    e.stopPropagation();
    //});
    //// Double click on file
    //this.element.delegate('.file', 'dblclick', function () {
    //    var file_path = $(this).attr('path');
    //    var type = $(this).attr('type');
    //    self.emit('navigate', file_path, type);
    //});
}
util.inherits(Tree, events.EventEmitter);

Tree.prototype.navigate = function (dir) {
    //var self = this;
    //fs.readdir(dir, function (error, files) {
    //    if (error) {
    //        console.log(error);
    //        window.alert(error);
    //        return;
    //    }

    //    for (var i = 0; i < files.length; ++i) {
    //        files[i] = mime.stat(path.join(dir, files[i]));
    //    }

    //    self.element.html(gen_files_view({ files: files }));
    //});
};

Tree.prototype.selectDrive = function () {
    // focus on my computer

};

exports.Tree = Tree;
